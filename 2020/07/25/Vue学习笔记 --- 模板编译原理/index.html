<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Vue学习笔记 --- 模板编译原理 | 幻尘の屋</title><meta name="description" content="Vue学习笔记 --- 模板编译原理"><meta name="keywords" content="前端,Vue原理"><meta name="author" content="幻尘"><meta name="copyright" content="幻尘"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="http://ta.qq.com"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="baidu-site-verification" content="wllVTIXScZteKqkv"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vue学习笔记 --- 模板编译原理"><meta name="twitter:description" content="Vue学习笔记 --- 模板编译原理"><meta name="twitter:image" content="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Vue学习笔记 --- 模板编译原理"><meta property="og:url" content="http://www.sleepygod.xyz/2020/07/25/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20---%20%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"><meta property="og:site_name" content="幻尘の屋"><meta property="og:description" content="Vue学习笔记 --- 模板编译原理"><meta property="og:image" content="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://www.sleepygod.xyz/2020/07/25/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20---%20%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"><link rel="prev" title="数据结构--链表" href="http://www.sleepygod.xyz/2020/08/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84--%E9%93%BE%E8%A1%A8/"><link rel="next" title="Vue3.0新特性" href="http://www.sleepygod.xyz/2020/07/22/Vue3.0%E6%96%B0%E7%89%B9%E6%80%A7/"><script src="http://tajs.qq.com/stats?sId=66540395" charset="UTF-8"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"http://www.sleepygod.xyz/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: 幻尘","link":"链接: http://www.sleepygod.xyz/2020/07/25/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20---%20%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/","source":"来源: 幻尘の屋","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: {"text":"梦想,未来,游戏,前端,二次元,正直,年轻,活力,学渣,志向,坚持,友善","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">幻尘の屋</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">22</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">23</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">16</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Vue学习笔记-—-模板编译原理"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Vue学习笔记 — 模板编译原理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一、渲染步骤"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">一、渲染步骤</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二、解析器"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">二、解析器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#截取开始标签"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">截取开始标签</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#文本"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">文本</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三、优化器"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">三、优化器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#什么是静态子树"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">什么是静态子树</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#静态节点与静态根节点在AST中的表示"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">静态节点与静态根节点在AST中的表示</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#找出并标记静态节点"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">找出并标记静态节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#找出并标记所有静态根节点"><span class="toc_mobile_items-number">1.3.4.</span> <span class="toc_mobile_items-text">找出并标记所有静态根节点</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#四、代码生成器"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">四、代码生成器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#通过AST生成代码字符串"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">通过AST生成代码字符串</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#原理"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">原理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#元素节点"><span class="toc_mobile_items-number">1.4.2.1.</span> <span class="toc_mobile_items-text">元素节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#文本节点"><span class="toc_mobile_items-number">1.4.2.2.</span> <span class="toc_mobile_items-text">文本节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#注释节点"><span class="toc_mobile_items-number">1.4.2.3.</span> <span class="toc_mobile_items-text">注释节点</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#总结"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">总结</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#写在后面"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">写在后面</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue学习笔记-—-模板编译原理"><span class="toc-number">1.</span> <span class="toc-text">Vue学习笔记 — 模板编译原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、渲染步骤"><span class="toc-number">1.1.</span> <span class="toc-text">一、渲染步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、解析器"><span class="toc-number">1.2.</span> <span class="toc-text">二、解析器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#截取开始标签"><span class="toc-number">1.2.1.</span> <span class="toc-text">截取开始标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文本"><span class="toc-number">1.2.2.</span> <span class="toc-text">文本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、优化器"><span class="toc-number">1.3.</span> <span class="toc-text">三、优化器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是静态子树"><span class="toc-number">1.3.1.</span> <span class="toc-text">什么是静态子树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#静态节点与静态根节点在AST中的表示"><span class="toc-number">1.3.2.</span> <span class="toc-text">静态节点与静态根节点在AST中的表示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#找出并标记静态节点"><span class="toc-number">1.3.3.</span> <span class="toc-text">找出并标记静态节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#找出并标记所有静态根节点"><span class="toc-number">1.3.4.</span> <span class="toc-text">找出并标记所有静态根节点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、代码生成器"><span class="toc-number">1.4.</span> <span class="toc-text">四、代码生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#通过AST生成代码字符串"><span class="toc-number">1.4.1.</span> <span class="toc-text">通过AST生成代码字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原理"><span class="toc-number">1.4.2.</span> <span class="toc-text">原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#元素节点"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">元素节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文本节点"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">文本节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#注释节点"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">注释节点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">1.5.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#写在后面"><span class="toc-number">1.6.</span> <span class="toc-text">写在后面</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Vue学习笔记 --- 模板编译原理</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-07-25<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-09-28</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Vue/">Vue</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Vue/%E5%89%8D%E7%AB%AF/">前端</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">814</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>阅读时长: 2 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2020/07/25/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20---%20%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/07/25/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20---%20%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h1 id="Vue学习笔记-—-模板编译原理"><a href="#Vue学习笔记-—-模板编译原理" class="headerlink" title="Vue学习笔记 — 模板编译原理"></a>Vue学习笔记 — 模板编译原理</h1><p>Vue.js提供了模板语法，允许我们声明式地描述状态和DOM之间地绑定关系，然后通过模板来生成真实DOM并将其呈现在用户界面上</p>
<h2 id="一、渲染步骤"><a href="#一、渲染步骤" class="headerlink" title="一、渲染步骤"></a>一、渲染步骤</h2><p>将模板编译成渲染函数可以分为两个步骤，先将模板解析成AST(Abstract Syntax Tree，抽象语法树)，然后再使用AST生成渲染函数</p>
<p>由于静态节点不需要总是重新渲染，因此在生成AST之后与生成渲染函数之前会需要一个操作->遍历一遍AST，给所有静态节点做一个标记，这样在虚拟DOM更新节点时就会发现这个标记，也就不会重新渲染它</p>
<p>模板编译答题分为三个部分：</p>
<ul>
<li>将模板解析为AST</li>
<li>遍历AST标记静态节点</li>
<li>使用AST生成渲染函数</li>
</ul>
<p>这三个部分在模板编译中分别抽象出三个模块来实现功能：</p>
<ul>
<li>解析器</li>
<li>优化器</li>
<li>代码生成器</li>
</ul>
<h2 id="二、解析器"><a href="#二、解析器" class="headerlink" title="二、解析器"></a>二、解析器</h2><p>解析器地功能就是将模板解析为AST</p>
<p>在解析器内部，分成了很多小的解析器->过滤器解析器，文本解析器、HTML解析器，通过主线将这些解析器组装在一起</p>
<p>文本解析器主要用于解析带有变量的文本<code>Hello</code>，不带有变量的文本是不需要使用文本解析器进行解析的</p>
<p>解析器的内部其实页分为了好几种解析器，有HTML解析器、文本解析器、以及过滤器解析器等其中最重要的就是HTML解析器，它在解析HTML的过程中会触发各种钩子函数，其中包括有开始标签钩子函数、结束标签钩子函数、文本钩子函数以及注释钩子函数</p>
<p>以下是相关的伪代码：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">parseHTML(template, {</span><br><span class="line">    start(tag, attrs, unary) { <span class="comment">//标签名， 标签的属性， 是否是自闭合函数</span></span><br><span class="line">        <span class="comment">// 每当解析到标签开始位置时，触发该函数</span></span><br><span class="line">    },</span><br><span class="line">    end() {</span><br><span class="line">        <span class="comment">// 每当解析到标签结束位置时，触发该函数</span></span><br><span class="line">    },</span><br><span class="line">    chars(text) {</span><br><span class="line">        <span class="comment">// 每当解析到文本时，触发该函数</span></span><br><span class="line">    },</span><br><span class="line">    comment(text) {</span><br><span class="line">        <span class="comment">// 每当解析到注释时，触发该函数</span></span><br><span class="line">    }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></div>

<p>当HTML解析器进行解析时会依次触发这些钩子函数，注意：哪怕是仅含有空格，也会触发start钩子函数</p>
<p>在parseHTML()函数中会循环对模板进行解析，每一轮循环中，都会进行字符串的截取，被截取的片段会分很多类型：</p>
<p>开始标签、结束标签、HTML注释、DOCTYPE，条件注释、文本</p>
<h3 id="截取开始标签"><a href="#截取开始标签" class="headerlink" title="截取开始标签"></a>截取开始标签</h3><p>在HTML解析器中，想分辨模板是否以开始标签开头不难，应该先判断是否以 < 开头， 如果不是，那么它一定不是以开始标签开头的模板，也就不需要执行开始标签的截取操作， 如果是以 < 开头的，那么就需要对其具体的标签类型进行解析判断，这也就需要开始使用正则表达式进行解析了</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ncname = <span class="string">`[a-zA-z_][\\w\\-\\.]*`</span></span><br><span class="line"><span class="keyword">const</span> qnameCapture = <span class="string">`((?:<span class="subst">${ncname}</span>\\:)?<span class="subst">${ncname}</span>)`</span></span><br><span class="line"><span class="keyword">const</span> startTagOpen = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">`^<<span class="subst">${qnameCapture}</span>`</span>)</span><br></pre></td></tr></tbody></table></figure></div>

<p>对开始标签进行截取后，会通过正则表达式进行分析，开始标签的解析中需要判断是否为自闭合标签，例如<code><input></code>就是自闭合标签，我们需要使用循环递归的方式解析标签中所携带的属性，并构建生成AST，之后我们需要根据标签的类型来进行下一步的解析，有如下几种情况：</p>
<ul>
<li>文本</li>
<li>注释</li>
<li>条件注释</li>
<li>DOCTYPE</li>
<li>结束标签 </li>
<li>开始标签</li>
</ul>
<p>我们使用栈维护DOM的层级，以便于更加清晰地知道节点之间的父子关系</p>
<h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><p>上面这些情况中最特殊的就是文本，文本的解析不需要正则表达式的参与，因为我们都知道从<strong>开始标签的结束</strong>到<strong>结束标签的开始</strong>这之间存在的就是文本，所以我们解析时只需要对去除开始标签后的整体使用<code>indexof('<')</code>找到结束标签的开始位置，截取其之前的所有字符就是文本</p>
<p>为什么说文本特殊，因为文本本身就有两种，一种使 纯文本，而另一种则是携带有变量的文本，如果是纯文本则不需要进行热河处理，但是如果是携带变量的文本，则我们需要使用文本解析器进行更进一步的解析，因为携带变量的文本在我们使用虚拟DOM进行渲染时需要将文本中的变量替换为变量所代表的值</p>
<p>当<code>"Hello "</code>被解析时</p>
<p>这是一个携带变量的文本，触发chars函数后，</p>
<p>会得到一个这样的expression变量<code>"Hello " + _s(name)</code></p>
<p><code>_s</code>就是<code>toString()</code>的别名</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toString</span>(<span class="params">val</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> val == <span class="literal">null</span></span><br><span class="line">      ? <span class="string">''</span></span><br><span class="line">      : <span class="keyword">typeof</span> val === <span class="string">'object'</span></span><br><span class="line">      ? <span class="built_in">JSON</span>.stringify(val, <span class="literal">null</span>, <span class="number">2</span>)</span><br><span class="line">      : <span class="built_in">String</span>(val)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p>在文本解析器中第一步就是对使用正则表达式对文本进行解析，也就是判断是不是纯文本，如果携带变量那么就会进行二次加工，将变量加载在文本中。</p>
<p>解析器的作用就是通过模板得到AST（抽象语法树）</p>
<p>生长城AST的过程需要借助HTMLi基尔希奇，当解析器触发不同的钩子函数时，可以构建出不同的节点，随后可以通过栈来确立他们之间的层级关系，最后我们可以得到一个完整的带DOM层级关系的AST</p>
<h2 id="三、优化器"><a href="#三、优化器" class="headerlink" title="三、优化器"></a>三、优化器</h2><p>优化器的目标是遍历AST，检测出所有静态子树，并为其添加标记</p>
<p>优化器的主要功能就是避免一些无用功来提升性能</p>
<h3 id="什么是静态子树"><a href="#什么是静态子树" class="headerlink" title="什么是静态子树"></a>什么是静态子树</h3><p>静态子树就是指 那些在AST中永远不会发生改变的节点，例如一个不带有任何变量的纯文本节点就是一个静态子树，而一个带有变量的文本就不是，因为他的内容会随着变量的更改而更改</p>
<p>标记静态子树的好处：</p>
<ul>
<li>每次重新渲染的时候，不需要为静态子树创建新的节点</li>
<li>在虚拟DOM中打补丁(patching)的过程中可以跳过</li>
</ul>
<p>以上两点好处能够有效节省JavaScript的运算成本</p>
<p><strong>优化器内部对的主要步骤：</strong></p>
<ol>
<li>在AST中找出所有的静态节点并打标记</li>
<li>在AST中赵出所有的静态根节点并打上标记</li>
</ol>
<p>静态根节点： 如果一个节点下面的所有子节点都是静态节点，它的父级是动态节点，那么它就是静态根节点</p>
<h3 id="静态节点与静态根节点在AST中的表示"><a href="#静态节点与静态根节点在AST中的表示" class="headerlink" title="静态节点与静态根节点在AST中的表示"></a>静态节点与静态根节点在AST中的表示</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//静态节点</span><br><span class="line">/*</span><br><span class="line"><p>我是静态节点</p></span><br><span class="line">*/</span><br><span class="line">//AST表示</span><br><span class="line">{</span><br><span class="line">    type: 1,</span><br><span class="line">    tag: 'p',</span><br><span class="line">    staticRoot: false,</span><br><span class="line">    static: true,</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">//静态根节点</span><br><span class="line">/*</span><br><span class="line"><ul><br><span class="line">  <li>我是静态节点1</li></span><br><span class="line">  <li>我是静态节点2</li></span><br><span class="line">  <li>我是静态节点3</li></span><br><span class="line"></span></ul></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">//AST表示</span><br><span class="line">{</span><br><span class="line">	type: 1,</span><br><span class="line">	tag: 'ul'</span><br><span class="line">	staticRoot: true,</span><br><span class="line">	static: true</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p>所有的AST节点经过优化器处理后，都会添加static属性和staticRoot属性，而优化器也正是通过这两个属性来对静态节点和静态根节点进行标记的</p>
<h3 id="找出并标记静态节点"><a href="#找出并标记静态节点" class="headerlink" title="找出并标记静态节点"></a>找出并标记静态节点</h3><p>基本操作就是从根节点开始向内层循环，判断根节点是不是静态节点，再用相同的方式处理子节点，直到所有子节点都处理完毕，就退出循环</p>
<p>节点标记函数就是首先通过<code>isStatic</code>函数对节点是否是静态节点进行判断，然后根据判断结果对static属性进行修改</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">markStatic</span> (<span class="params">node</span>) </span>{</span><br><span class="line">    node.static = isStatic(node)</span><br><span class="line">    <span class="keyword">if</span>(node.type === <span class="number">1</span>) {</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>, len = node.children.length; i < len; i++) {</span><br><span class="line">            markStatic(child)</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(!child.static) { <span class="comment">//防止出现父节点被标记静态而子节点为动态节点</span></span><br><span class="line">            node.static = <span class="literal">false</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p>上面提到并且调用了<code>isStatic</code>函数，它在源码中的实现是这样的：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStatic</span> (<span class="params">node</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span>(node.type === <span class="number">2</span>) { <span class="comment">//带有变量的文本节点</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(ndoe.type === <span class="number">3</span>) { <span class="comment">//不带变量的纯文本节点</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> !!(node.pre || (</span><br><span class="line">        !node.hasBindings && <span class="comment">//没有动态绑定</span></span><br><span class="line">        !node.is && !node.for && <span class="comment">//没有v-if和v-for</span></span><br><span class="line">        !isBuiltInTag(node.tag) &&<span class="comment">//不是内置标签</span></span><br><span class="line">        isPlatformReservedTag(node.tag) &&<span class="comment">//不是组件</span></span><br><span class="line">        !isDirectChildOfTemplateFor(node) &&</span><br><span class="line">        <span class="built_in">Object</span>.keys(ndoe).every(isStaticKey)</span><br><span class="line">    ))</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p>符合静态节点的条件也十分苛刻：</p>
<ul>
<li>不能使用动态绑定语法，也就是标签中不能有v-, @, :，开头的属性</li>
<li>不能使用v-if,v-for或v-else等指令</li>
<li>不能是内置标签，即slot、component等</li>
<li>不能使组件，即标签名必须是保留标签</li>
<li>当前节点的父节点不能是带有v-for指令的template标签</li>
<li>节点中不存在动态节点才会有的属性（静态节点的属性范围：<code>type</code>、<code>tag</code>、<code>attrsList</code>、<code>attrMap</code>、<code>plain</code>、<code>parent</code>、<code>children</code>、<code>attrs</code>、<code>staticClass</code>和<code>staticStyle</code>）</li>
</ul>
<h3 id="找出并标记所有静态根节点"><a href="#找出并标记所有静态根节点" class="headerlink" title="找出并标记所有静态根节点"></a>找出并标记所有静态根节点</h3><p>这个过程与上面标记静态节点的过程类似，不同的就是静态根节点的寻找过程中，如果我们确定了静态根节点，那么我们就没有继续向下寻找了</p>
<p>我们上面的代码中提到过这样一个逻辑，静态节点的所有子节点也都是静态节点，所以我们在遍历时所见到的第一个静态节点肯定是静态根节点，它所有的子节点也肯定是静态节点</p>
<p><font style="color: red">！！！注意：有一种例外情况就是当一个节点没有任何子节点，知识独立的静态节点时，它是静态根节点，但是不需要标记为静态根节点，因为完全没有必要，优化的成本反而更高</font></p>
<h2 id="四、代码生成器"><a href="#四、代码生成器" class="headerlink" title="四、代码生成器"></a>四、代码生成器</h2><p>代码生成器是模板编译的 最后一步，它的作用是将AST转换成渲染函数中的内容，这个内容称为”代码字符串“</p>
<p>例如： </p>
<p><code></code></p><p title="Sleepygod" @click="c"><code>1</code></p><p></p>
<p>生成的代码为：</p>
<p><code>with(this){return _c('p',{attrs:{"title":"Sleepygod"},on:{"click":c}},[_v("1")])}</code></p>
<p>格式化后是这样的：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> (<span class="keyword">this</span>) {</span><br><span class="line">    <span class="keyword">return</span> _c(</span><br><span class="line">        <span class="string">"div"</span>,</span><br><span class="line">        {</span><br><span class="line">            attrs: {<span class="string">"id"</span>: <span class="string">"el"</span>}</span><br><span class="line">        },</span><br><span class="line">        [</span><br><span class="line">            _v(<span class="string">"Hello "</span> + _s(name))</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>



<p>这样将一个代码字符串导出到外界使用时，会将代码字符串放到函数中，这个函数叫做渲染函数</p>
<p>渲染函数的作用是创建vnode，代码字符串中的 <code>_c</code> 与 <code>_v</code>都是创建vnode的方法，<code>_c</code>是创建元素类型的vnode，<code>_v</code>是创建文本类型的vnode</p>
<p><code>_c</code>就是<code>createElement</code>的别称，它是虚拟DOM中提供的方法，他的作用是创建虚拟节点</p>
<h3 id="通过AST生成代码字符串"><a href="#通过AST生成代码字符串" class="headerlink" title="通过AST生成代码字符串"></a>通过AST生成代码字符串</h3><p>节点共有三种类型：元素节点、文本节点、注释节点</p>
<p>对应的创建方法： <code>createElement</code>、<code>createTextVNode</code>、<code>createEmptyVNode</code></p>
<p>对应的别名：<code>_c</code>、<code>_v</code>、<code>_e</code></p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>不同类型的节点生成方式是不一样的</p>
<h4 id="元素节点"><a href="#元素节点" class="headerlink" title="元素节点"></a>元素节点</h4><p>生成元素节点，其实就是生成一个<code>_c</code>的函数调用字符串</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElement</span> (<span class="params">el, state</span>) </span>{</span><br><span class="line">    <span class="keyword">const</span> data = el.plain ? <span class="literal">undefined</span> : getData(el, state)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> children = genChilderen(el, state)</span><br><span class="line">    code = <span class="string">`_c('<span class="subst">${el.tag}</span>'<span class="subst">${<span class="regexp">//</span></span></span></span><br><span class="line"><span class="string"><span class="subst">      data ? <span class="string">`<span class="subst">${data}</span>`</span> : <span class="string">''</span> <span class="regexp">//</span>data </span></span></span><br><span class="line"><span class="string"><span class="subst">	}</span><span class="subst">${</span></span></span><br><span class="line"><span class="string"><span class="subst">      children ? <span class="string">`,<span class="subst">${children}</span>`</span> : <span class="string">''</span> <span class="regexp">//</span>children</span></span></span><br><span class="line"><span class="string"><span class="subst">	}</span>)`</span></span><br><span class="line">    <span class="keyword">return</span> code</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p>plain属性是在编译的时候发现的，如果节点没有属性，就会把plain设置为true</p>
<p>代码中的主要逻就是通过<code>getData</code>和<code>getChildren</code>分别获取data和children，然后将他们拼接到字符串指定的位置，最后把拼好的<code>"_c(tagName, data, children)"</code>返回，这样一个元素节点的代码字符串就生成好了</p>
<p>而data与children也是字符串，他们的生成方式就是先给data赋值<code>'{'</code>然后发现节点中有哪些属性数据，就将他们直接拼接在data中，最后拼接一个<code>'}'</code>这样data就生成好了</p>
<h4 id="文本节点"><a href="#文本节点" class="headerlink" title="文本节点"></a>文本节点</h4><p>文本节点的生成依旧非常简单，我们只需要将文本放在<code>_v</code>这个函数的参数中即可：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getText</span> (<span class="params">text</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`_v(<span class="subst">${text.type === <span class="number">2</span></span></span></span><br><span class="line"><span class="string"><span class="subst">	  ? text.expression</span></span></span><br><span class="line"><span class="string"><span class="subst">      : <span class="built_in">JSON</span>.stringify(text.text)</span></span></span><br><span class="line"><span class="string"><span class="subst">	}</span>)`</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>

<p>我们会判断文本的类型，如果是动态文本就使用<code>expression</code>，如果是静态文本，就使用<code>text</code></p>
<h4 id="注释节点"><a href="#注释节点" class="headerlink" title="注释节点"></a>注释节点</h4><p>注释节点的生成方式与文本节点相似</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComment</span> (<span class="params">comment</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`_e(<span class="subst">${<span class="built_in">JSON</span>.stringify(comment.text)}</span>)`</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>



<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>模板编译是Vue最重要的一部分，先由解析器进行代码解析，生成AST，再由优化器对AST进行优化，将所有静态节点和静态根节点惊醒标记，然后由代码生成器生成渲染函数所需要的渲染字符串，最后交给虚拟DOM的渲染函数进行渲染操作。</p>
<h2 id="写在后面"><a href="#写在后面" class="headerlink" title="写在后面"></a>写在后面</h2><p>前前后后总共学习了5、6天左右的时间，中间也经历了几次面试，之后可能会更新面试经历吧，还没有面试成功，还没有找到实习，直接开始准备秋招了，加油加油！！！</p>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">幻尘</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.sleepygod.xyz/2020/07/25/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20---%20%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">http://www.sleepygod.xyz/2020/07/25/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20---%20%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.sleepygod.xyz">幻尘の屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端    </a><a class="post-meta__tags" href="/tags/Vue%E5%8E%9F%E7%90%86/">Vue原理    </a></div><div class="post_share"><div class="social-share" data-image="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/08/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84--%E9%93%BE%E8%A1%A8/"><img class="prev_cover lazyload" data-src="https://s1.ax1x.com/2020/08/03/adWhND.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>数据结构--链表</span></div></a></div><div class="next-post pull_right"><a href="/2020/07/22/Vue3.0%E6%96%B0%E7%89%B9%E6%80%A7/"><img class="next_cover lazyload" data-src="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>Vue3.0新特性</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/06/04/Vue学习笔记 ---- 虚拟DOM/" title="Vue学习笔记 ---- 虚拟DOM"><img class="relatedPosts_cover lazyload"data-src="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-04</div><div class="relatedPosts_title">Vue学习笔记 ---- 虚拟DOM</div></div></a></div><div class="relatedPosts_item"><a href="/2020/09/20/Vue学习笔记 --- 整体流程/" title="Vue学习笔记 --- 整体流程"><img class="relatedPosts_cover lazyload"data-src="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-09-20</div><div class="relatedPosts_title">Vue学习笔记 --- 整体流程</div></div></a></div><div class="relatedPosts_item"><a href="/2020/05/28/Vue学习笔记 --- Vue的响应式原理/" title="Vue学习笔记 --- Vue的响应式原理"><img class="relatedPosts_cover lazyload"data-src="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-28</div><div class="relatedPosts_title">Vue学习笔记 --- Vue的响应式原理</div></div></a></div><div class="relatedPosts_item"><a href="/2020/05/29/JavaScript -- this的使用/" title="JavaScript -- this的使用"><img class="relatedPosts_cover lazyload"data-src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3095136509,3220724763&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-29</div><div class="relatedPosts_title">JavaScript -- this的使用</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/22/Vue3.0新特性/" title="Vue3.0新特性"><img class="relatedPosts_cover lazyload"data-src="https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-22</div><div class="relatedPosts_title">Vue3.0新特性</div></div></a></div><div class="relatedPosts_item"><a href="/2020/05/30/浏览器的重绘和回流/" title="浏览器的重绘和回流"><img class="relatedPosts_cover lazyload"data-src="https://s1.ax1x.com/2020/06/01/t8F49x.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-30</div><div class="relatedPosts_title">浏览器的重绘和回流</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'OU8A9cTTIRw9H3Ytvx9aOMBU-gzGzoHsz',
  appKey:'EmcdV7J1DhKUOPQmI154lXVe',
  placeholder:'Please leave your footprints',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://s1.ax1x.com/2020/06/04/tw0mOe.th.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 幻尘</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>蒙ICP备20000691号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/ClickShowText.js"></script></body></html>